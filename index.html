<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å¹³å®‰å¤œå¿«ä¹ ğŸ„</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
}

/* èƒŒæ™¯ */
body {
    background: linear-gradient(180deg, #ff9a9e, #fad0c4);
    color: #fff;
}

/* æŸ”å…‰ */
body::after {
    content: "";
    position: fixed;
    inset: 0;
    background: radial-gradient(circle,
        rgba(255,255,255,0.2),
        rgba(255,255,255,0) 60%);
    animation: glow 6s ease-in-out infinite;
    pointer-events: none;
}

@keyframes glow {
    0%,100% { opacity: .4; }
    50% { opacity: .7; }
}

/* åœ£è¯æ ‘ */
.bg-tree {
    position: absolute;
    bottom: -40px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 320px;
    opacity: 0.28;
    animation: treeMove 6s ease-in-out infinite;
    pointer-events: none;
}

@keyframes treeMove {
    0%,100% { transform: translateX(-50%) scale(1); }
    50% { transform: translateX(-50%) scale(1.06); }
}

/* æ˜Ÿæ˜Ÿ */
.star {
    position: absolute;
    bottom: 360px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 48px;
    animation: starGlow 2.5s ease-in-out infinite;
}

@keyframes starGlow {
    0%,100% { opacity: .6; transform: translateX(-50%) scale(1); }
    50% { opacity: 1; transform: translateX(-50%) scale(1.25); }
}

/* å¡ç‰‡ */
.card {
    position: relative;
    z-index: 10;
    width: 88%;
    max-width: 360px;
    margin: auto;
    top: 50%;
    transform: translateY(-50%);
    text-align: center;
    padding: 30px 22px;
    animation: float 4s ease-in-out infinite;
}

@keyframes float {
    0%,100% { transform: translateY(-50%) translateY(0); }
    50% { transform: translateY(-50%) translateY(-14px); }
}

h1 { font-size: 24px; }

.name {
    font-size: 20px;
    animation: heartbeat 2.4s infinite;
}

@keyframes heartbeat {
    0%,100% { transform: scale(1); }
    50% { transform: scale(1.08); }
}

/* æƒ…è¯ */
.message {
    position: absolute;
    font-size: 16px;
    white-space: nowrap;
    animation: rise 3s ease-out forwards;
    pointer-events: none;
}

@keyframes rise {
    0% { opacity: 0; transform: translateY(10px); }
    25% { opacity: 1; }
    100% { opacity: 0; transform: translateY(-140px); }
}

/* çˆ±å¿ƒ */
.heart-burst {
    position: absolute;
    font-size: 20px;
    animation: burst 1.3s ease-out forwards;
    pointer-events: none;
}

@keyframes burst {
    to {
        transform: translate(var(--x), var(--y)) scale(1.4) rotate(360deg);
        opacity: 0;
    }
}

/* æ˜Ÿå…‰ */
.spark {
    position: absolute;
    font-size: 12px;
    animation: sparkFly 1.6s linear forwards;
    pointer-events: none;
}

@keyframes sparkFly {
    to {
        transform: translate(var(--sx), var(--sy));
        opacity: 0;
    }
}

/* é›ª */
.snow {
    position: absolute;
    top: -10px;
    animation: snowFall linear infinite;
}

@keyframes snowFall {
    to { transform: translateY(110vh); }
}

/* å¿ƒè·³é—ªå…‰ */
body.heartbeat {
    animation: beatFlash .8s ease;
}

@keyframes beatFlash {
    50% { filter: brightness(1.25) saturate(1.3); }
}
</style>

<!-- MediaPipe -->
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.min.js"></script>

</head>

<body>

<div class="bg-tree">ğŸ„</div>
<div class="star">â­</div>

<div class="card">
    <h1>å¹³å®‰å¤œå¿«ä¹</h1>
    <div class="name">To å°å·¦ ğŸ’•</div>
</div>

<audio id="bgm" loop>
    <source src="https://cdn.pixabay.com/audio/2022/12/05/audio_5a7c3f9db8.mp3">
</audio>

<video id="video" playsinline style="display:none;"></video>

<script>
const messages = [
    "å°å·¦ï¼Œæˆ‘å¥½åƒè¶Šæ¥è¶Šç¦»ä¸å¼€ä½ äº†",
    "é ä½ è¿‘ä¸€ç‚¹ï¼Œå¿ƒå°±ä¹±ä¸€ç‚¹ ğŸ’—",
    "å¦‚æœå¯ä»¥ï¼Œæˆ‘æƒ³ä¸€ç›´è¿™æ ·é™ªç€ä½ ",
    "ä½ åœ¨çš„æ—¶å€™ï¼Œæˆ‘ä»€ä¹ˆéƒ½ä¸æƒ³è¦",
    "ä»Šæ™šæœ‰ç‚¹ç”œï¼Œå¤§æ¦‚æ˜¯ä½ åœ¨æˆ‘å¿ƒé‡Œ",
    "æˆ‘å¥½åƒå¼€å§‹ä¹ æƒ¯ä½ äº†",
    "å¹³å®‰å¤œï¼Œåªæƒ³è¢«ä½ æŠ±ç´§",
    "å°å·¦ï¼Œä½ èƒ½ä¸èƒ½åˆ«èµ°"
];

/* ç‚¹å‡»äº’åŠ¨ */
document.addEventListener("click", e => {
    const bgm = document.getElementById("bgm");
    if (bgm.paused) bgm.play();
    spawnMessage(e.clientX, e.clientY);
    spawnHearts(e.clientX, e.clientY, 14);
    spawnSparks(e.clientX, e.clientY);
});

/* å…¬å…±å‡½æ•° */
function spawnMessage(x,y){
    const m=document.createElement("div");
    m.className="message";
    m.innerText=messages[Math.random()*messages.length|0];
    m.style.left=x+"px";
    m.style.top=y+"px";
    document.body.appendChild(m);
    setTimeout(()=>m.remove(),3000);
}

function spawnHearts(x,y,n){
    for(let i=0;i<n;i++){
        const h=document.createElement("div");
        h.className="heart-burst";
        h.innerText="ğŸ’–";
        h.style.left=x+"px";
        h.style.top=y+"px";
        h.style.setProperty("--x",(Math.random()*240-120)+"px");
        h.style.setProperty("--y",(Math.random()*240-120)+"px");
        document.body.appendChild(h);
        setTimeout(()=>h.remove(),1300);
    }
}

function spawnSparks(x,y){
    for(let i=0;i<8;i++){
        const s=document.createElement("div");
        s.className="spark";
        s.innerText="âœ¨";
        s.style.left=x+"px";
        s.style.top=y+"px";
        s.style.setProperty("--sx",(Math.random()*120-60)+"px");
        s.style.setProperty("--sy",(Math.random()*120-60)+"px");
        document.body.appendChild(s);
        setTimeout(()=>s.remove(),1600);
    }
}

/* é›ª */
setInterval(()=>{
    const snow=document.createElement("div");
    snow.className="snow";
    snow.innerText="â„ï¸";
    snow.style.left=Math.random()*innerWidth+"px";
    snow.style.fontSize=(Math.random()*10+10)+"px";
    snow.style.animationDuration=(Math.random()*5+5)+"s";
    document.body.appendChild(snow);
    setTimeout(()=>snow.remove(),10000);
},350);

/* æ‰‹åŠ¿è¯†åˆ« */
const hands=new Hands({
    locateFile:f=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${f}`
});
hands.setOptions({maxNumHands:1,minDetectionConfidence:.7,minTrackingConfidence:.7});

let last=0;
hands.onResults(r=>{
    if(!r.multiHandLandmarks)return;
    if(Date.now()-last<1500)return;
    const lm=r.multiHandLandmarks[0];
    const up=(t,p)=>t.y<p.y;
    const index=up(lm[8],lm[6]);
    const middle=up(lm[12],lm[10]);
    const ring=up(lm[16],lm[14]);
    const pinky=up(lm[20],lm[18]);
    const x=lm[8].x*innerWidth;
    const y=lm[8].y*innerHeight;

    if(index&&middle&&ring&&pinky){
        spawnHearts(x,y,30);
        spawnMessage(x,y);
        last=Date.now();
    }
    if(!index&&!middle&&!ring&&!pinky){
        document.body.classList.add("heartbeat");
        setTimeout(()=>document.body.classList.remove("heartbeat"),800);
        last=Date.now();
    }
    if(index&&!middle&&!ring&&!pinky){
        spawnMessage(x,y);
        last=Date.now();
    }
});

new Camera(document.getElementById("video"),{
    onFrame:async()=>hands.send({image:video}),
    width:640,height:480
}).start();
</script>

</body>
</html>
